{% extends "layouts/back-end/base.njk" %}

{% block main %}
    <div class="bg-white rounded-2xl mb-10 shadow-md">
        <header class="mb-6 p-6 pl-8 text-4xl">
            <p>Liste SAEs
                <span class="block text-sm">{{ list_saes.count }} éléments au total</span>
            </p>
        </header>

        <table class="w-full table-fixed bg-white rounded-lg overflow-hidden border-collapse">
            <thead>
                <tr class="text-slate-800">
                    <th class="font-bold pl-8  text-left border-solid border-slate-200 border-b pb-5">Titre</th>
                    <th class="font-bold pl-8 text-left border-solid border-slate-200 border-b pb-5">Description</th>
                    <th class="pl-8 border-solid border-slate-200 border-b pb-5 w-[150px]"></th>
                    <th class="pl-8 border-solid border-slate-200 border-b pb-5 w-[150px]"></th>
                </tr>
            </thead>
            <tbody>
                {% for item in list_saes.data %}
                    <tr class="hover:bg-neutral-50 even:bg-slate-50">
                        <td class="bg-transparent border-solid border-slate-200 border-b p-4 pl-8" data-label="Titre">{{ item.title }}</td>
                        <td class="p-4 pl-8 bg-transparent border-solid border-slate-200 border-b shadow-transparent" data-label="Description">
                            <p class="line-clamp-2 md:line-clamp-1" title="{{ item.content }}">{{ item.content }}</p>
                        </td>
                        <td class="p-4 pl-8 bg-transparent border-solid border-slate-200 border-b shadow-transparent">
                            <a href="{{ admin_url ~ '/saes/' ~ item._id }}" class="text-blue-500 hover:text-blue-900 block sm:inline-block w-full text-left sm:w-fit">Editer</a>
                        </td>
                        <td class="p-4 pl-8 bg-transparent border-solid border-slate-200 border-b shadow-transparent">
                            <button type="button" class="text-red-600 block sm:inline-block w-full text-left sm:w-fit" data-delete-name='{{ item.title }}' data-delete-url="{{ base_url ~ "/api/saes/" ~ item._id }}">Supprimer</button>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="5" class="text-center bg-transparent border-solid border-slate-200 border-b p-4 pl-8">Pas de contenu pour le moment</td>
                    </tr>
                {% endfor %}
            </tbody>
        </tbody>
    </table>

    <footer class="mb-6 p-6 pl-8">
        <p class="text-center">
            <a href="{{ admin_url ~ '/saes' }}" class="text-blue-500 hover:text-blue-700">Voir tout</a>
        </p>
    </footer>
</div>

<div class="bg-white rounded-2xl mb-10 shadow-md">
    <header class="mb-6 p-6 pl-8 text-4xl">
        <p>Liste articles
                <span class="block text-sm">{{ list_articles.count }} éléments au total</span>
        </p>
    </header>

    <table class="w-full table-fixed bg-white rounded-lg overflow-hidden border-collapse">
        <thead>
            <tr class="text-slate-800">
                <th class="font-bold pl-8  text-left border-solid border-slate-200 border-b pb-5" >Titre</th>
                <th class="font-bold pl-8 text-left border-solid border-slate-200 border-b pb-5">Description</th>
                <th class="font-bold pl-8 text-left border-solid border-slate-200 border-b pb-5">Dernière mise à jour</th>
                <th class="pl-8 border-solid border-slate-200 border-b pb-5 w-[150px]"></th>
                <th class="pl-8 border-solid border-slate-200 border-b pb-5 w-[150px]"></th>
            </tr>
        </thead>
        <tbody>
            {% for item in list_articles.data %}
                <tr class="hover:bg-neutral-50 even:bg-slate-50">
                    <td class="bg-transparent border-solid border-slate-200 border-b p-4 pl-8" data-label="Titre">{{ item.title }}</td>
                    <td class="p-4 pl-8 bg-transparent border-solid border-slate-200 border-b shadow-transparent" data-label="Description">
                        <p class="line-clamp-2 md:line-clamp-1" title="{{ item.content }}">{{ item.content }}</p>
                    </td>
                    <td class="bg-transparent border-solid border-slate-200 border-b p-4 pl-8" data-label="Dernière mise à jour">{{ item.updated_at|date("dd/LL/yyyy à HH:mm") }}</td>

                    <td class="p-4 pl-8 bg-transparent border-solid border-slate-200 border-b shadow-transparent">
                        <a href="{{ admin_url ~ '/articles/' ~ item._id }}" class="text-blue-500 hover:text-blue-900 block sm:inline-block w-full text-left sm:w-fit">Editer</a>
                    </td>
                    <td class="p-4 pl-8 bg-transparent border-solid border-slate-200 border-b shadow-transparent">
                        <button type="button" class="text-red-600 block sm:inline-block w-full text-left sm:w-fit" data-delete-name='{{ item.title }}' data-delete-url="{{ base_url ~ "/api/articles/" ~ item._id }}">Supprimer</button>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="text-center bg-transparent border-solid border-slate-200 border-b p-4 pl-8">Pas de contenu pour le moment</td>
                </tr>
            {% endfor %}
        </tbody>
    </tbody>
</table>

<footer class="mb-6 p-6 pl-8">
    <p class="text-center">
        <a href="{{ admin_url ~ '/articles' }}" class="text-blue-500 hover:text-blue-700">Voir tout</a>
    </p>
</footer>
</div>
{% endblock %}