{% macro field(imagename, folder, accepts = ".jpg, .jpeg, .png", name = "image", id = "image") %}
    {% set border_classes = "border-b border-solid border-slate-300" %}
    {% set upload_dir = folder | default(upload_path) %}

    <table class="table-fixed w-full">
        <thead>
            <tr>
                <th class="{{ border_classes }} text-sm font-bold p-1">Nouvelle image</th>
                <th class="{{ border_classes }} text-sm font-bold p-1">Image actuelle</th>
            </tr>
        </thead>
        <tbody>
            <tr class="relative">
                <td class="{{ border_classes }} p-2 bg-clip-padding align-top">
                    <div class="absolute text-4xl right-2/4 top-2/4 -translate-y-2/4 m-0 rotate-90 z-10 lg:rotate-0">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                            <path fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="relative">
                        <button data-delete-preview-upload-button="{{ name }}" type="button" class="absolute right-2/4 bottom-4 translate-x-2/4 rounded-2xl shadow-sm bg-red-600 hover:bg-red-800 px-2 py-1 text-white hidden">Supprimer</button>
                        <figure class="flex justify-center items-center h-[16rem]">
                            <img data-preview-upload="{{ name }}" alt="" class="max-w-full max-h-full">
                        </figure>
                    </div>
                </td>
    
                <td class="{{ border_classes }} p-2 bg-clip-padding align-top">
                    <figure class="flex justify-center items-center h-[16rem] relative">
                        <img src="{{ upload_dir ~ imagename if imagename else null }}" data-current-image="{{ name }}" data-image-path="{{ upload_dir ~ imagename if imagename else null }}" alt="" class="max-w-full max-h-full">
                        {% if imagename %}
                            <button data-delete-current-image-button="{{ name }}" type="button" class="absolute right-2/4 bottom-4 translate-x-2/4 rounded-2xl shadow-sm bg-red-600 hover:bg-red-800 px-2 py-1 text-white">Supprimer</button>
                            <input type="checkbox" class="hidden" name="delete_file_{{name}}" id="" data-current-image-checkbox="{{ name }}">
                        {% endif %}
                    </figure>
                </td>
            </tr>
            <tr>
                <td class="{{ border_classes }} p-5">
                    <div class="flex flex-col sm:flex-row gap-y-4">
                        <div>
                            <input 
                                data-upload-file="{{ name }}"
                                type="file" 
                                accept="{{ accepts }}"
                                class="block w-full text-sm text-slate-500
                                    file:mr-4 file:py-2 file:px-4
                                    file:rounded-full file:border-0
                                    file:text-sm
                                    text-transparent
                                    file:bg-sky-50 file:border-sky-500
                                    hover:file:bg-sky-100
                                "
                                id="{{ id }}"
                                name="{{ name }}"
/>
                            <span class="mt-1 text-sm text-slate-500" id="file_input_help">Fichiers {{ accepts }} seulement (taille max. 800kB)</span>
                        </div>

                        <button 
                            type="button" 
                            class="text-sm self-start rounded-full block py-2 px-4 border-sky-500 text-slate-700 bg-blue-50 hover:bg-sky-100" 
                            data-clipboard-upload="{{ name }}"
                        >
                            Coller depuis le presse-papier
                        </button>
                    </td>
                    <td class="{{ border_classes }} p-5"></td>
                </tr>
            </tbody>
        </table>
{% endmacro %}